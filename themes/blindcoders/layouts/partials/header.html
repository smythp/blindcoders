<nav class="navbar navbar-expand navbar-light bg-light">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link {{ if .IsHome }} active {{ end }} " href="{{ .Site.Home.Permalink }}">Home</a>
      </li>

      {{ $currentPage := . }}

      {{ range .Site.Menus.main.ByWeight }}

      {{ if .HasChildren }}
      <li class="nav-item dropdown">
        <a class='nav-link dropdown-toggle  {{ if or ($currentPage.IsMenuCurrent "main" .) ($currentPage.HasMenuCurrent "main" .) }} active {{ end }}' href="#"
           id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          {{ .Title }}
        </a>
        
        <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
          {{ range .Children }}
          <li>
            <a class='dropdown-item  {{ if or ($currentPage.IsMenuCurrent "main" .) ($currentPage.HasMenuCurrent "main" .) }} active {{ end }}' href="{{ .URL }}">  {{ .Title }}</a>
          </li>
          {{ end }}
        </ul> 
      </li>
      
      {{ else }}
      <li class="nav-item">
        <a class='nav-link {{ if or ($currentPage.IsMenuCurrent "main" .) ($currentPage.HasMenuCurrent "main" .) }} active {{ end }}'
           href="{{ absURL .URL }}">
          {{ .Title }}
        </a>
      </li>
      {{ end }}

      {{ end }}
      
    </ul>
</nav>
